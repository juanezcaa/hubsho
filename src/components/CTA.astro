---
---

<section id="demo" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 py-16 sm:py-24 lg:py-32">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto">
      <div class="text-center mb-12">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-4 sm:mb-6">
          Â¿Listo para transformar tu negocio?
        </h2>
        <p class="text-lg sm:text-xl text-blue-100">
          Agenda una demo personalizada y descubre cÃ³mo Hubsho puede ayudarte a vender mÃ¡s.
          Sin compromiso, 100% gratis.
        </p>
      </div>

      <!-- FORM -->
      <div id="form-wrapper">
        <form
          id="demo-form"
          action="https://formspree.io/f/maqdnvle"
          method="POST"
          class="bg-white rounded-lg shadow-xl p-8 sm:p-10"
        >
          <input type="hidden" name="_subject" value="Nueva solicitud de demo â€” Hubsho" />
          <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
            <input name="name" type="text" placeholder="Tu nombre completo" required
              class="px-4 py-3 border-2 border-gray-200 rounded-md focus:outline-none focus:border-blue-600 text-gray-900" />
            <input name="email" type="email" placeholder="Email empresarial" required
              class="px-4 py-3 border-2 border-gray-200 rounded-md focus:outline-none focus:border-blue-600 text-gray-900" />
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
            <input name="phone" type="tel" placeholder="TelÃ©fono con WhatsApp" required
              class="px-4 py-3 border-2 border-gray-200 rounded-md focus:outline-none focus:border-blue-600 text-gray-900" />
            <input name="company" type="text" placeholder="Nombre de tu negocio" required
              class="px-4 py-3 border-2 border-gray-200 rounded-md focus:outline-none focus:border-blue-600 text-gray-900" />
          </div>

          <textarea name="message" placeholder="CuÃ©ntanos brevemente sobre tu negocio (opcional)" rows="3"
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-md focus:outline-none focus:border-blue-600 text-gray-900 mb-4 resize-none"></textarea>

          <button
            id="submit-btn"
            type="submit"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-md transition-all duration-200 flex items-center justify-center gap-2 mb-4"
          >
            Solicitar demo gratuita
          </button>

          <p class="text-center text-sm text-gray-600">
            ðŸ“ž Te contactaremos en menos de 24 horas. Sin spam ni presiÃ³n de ventas.
          </p>
        </form>
      </div>

      <!-- SUCCESS -->
    <div id="success-message" class="hidden bg-white rounded-lg shadow-xl p-10 text-center">
      <div class="mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-full bg-blue-600 text-white font-bold">
        âœ“
      </div>

      <h3 class="text-2xl font-bold text-gray-900 mb-2">
        Â¡Gracias! Ya recibimos tu solicitud
      </h3>

      <p class="text-gray-600 leading-relaxed">
        Te contactaremos en menos de <strong>24 horas</strong> para agendar tu demo.
      </p>
    </div>

      <!-- ERROR -->
      <div id="error-message" class="hidden bg-white rounded-lg shadow-xl p-10 text-center">
        <h3 class="text-2xl font-bold text-gray-900 mb-2">Upsâ€¦ no se pudo enviar</h3>
        <p class="text-gray-600 mb-6">Intenta de nuevo o contÃ¡ctanos por WhatsApp.</p>
        <button id="retry-btn" class="inline-flex items-center justify-center rounded-lg bg-gray-900 px-6 py-3 text-white font-semibold hover:bg-black">
          Reintentar
        </button>
      </div>

    </div>
  </div>

  <script is:inline>
    const form = document.getElementById("demo-form");
    const wrapper = document.getElementById("form-wrapper");
    const success = document.getElementById("success-message");
    const errorBox = document.getElementById("error-message");
    const submitBtn = document.getElementById("submit-btn");
    const retryBtn = document.getElementById("retry-btn");

    async function handleSubmit(e) {
      e.preventDefault();

      if (!form) return;

      // Honeypot: si bots llenan _gotcha, cancelamos
      const gotcha = form.querySelector('input[name="_gotcha"]');
      if (gotcha && gotcha.value) return;

      // UI loading
      submitBtn?.setAttribute("disabled", "true");
      const oldText = submitBtn?.textContent;
      if (submitBtn) submitBtn.textContent = "Enviando...";

      try {
        const formData = new FormData(form);

        const res = await fetch(form.action, {
          method: "POST",
          body: formData,
          headers: { Accept: "application/json" },
        });

        if (res.ok) {
          wrapper?.classList.add("hidden");
          errorBox?.classList.add("hidden");
          success?.classList.remove("hidden");
          form.reset();
        } else {
          wrapper?.classList.add("hidden");
          success?.classList.add("hidden");
          errorBox?.classList.remove("hidden");
        }
      } catch (err) {
        wrapper?.classList.add("hidden");
        success?.classList.add("hidden");
        errorBox?.classList.remove("hidden");
      } finally {
        submitBtn?.removeAttribute("disabled");
        if (submitBtn) submitBtn.textContent = oldText || "Solicitar demo gratuita";
      }
    }

    form?.addEventListener("submit", handleSubmit);

    retryBtn?.addEventListener("click", () => {
      errorBox?.classList.add("hidden");
      success?.classList.add("hidden");
      wrapper?.classList.remove("hidden");
      document.getElementById("demo")?.scrollIntoView({ behavior: "smooth" });
    });
  </script>
</section>